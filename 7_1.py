# Программа lab6_3
# Вычисление суммы по варианту 17
# Программист: Морозов А. П., гр. 444
# Проверил: Бурмистров А. С.
# Дата написания: 26.03.2025
# Переменные:
#   x0 - начальное значение x
#   hx - шаг изменения x
#   xn - конечное значение x
#   nx - количество шагов
#   i - счетчик итераций
#   s - сумма значений функции
#   p - произведение значений функции
#   y - значение функции в точке x

from math import sin, cos, fabs, pow

print('Введите x = x0(hx)xn')
x0 = float(input('x0 = '))
hx = float(input('hx = '))
xn = float(input('xn = '))

s = 0
p = 1
x = x0
i = 0
nx = int(round((xn - x0) / hx + 1E-6))  # Количество шагов с учетом погрешности

while i <= nx:
    if x < 1:
        y = float('nan')  # Функция не определена
    elif 1 <= x <= 3:
        y = (x / 2) * pow(fabs(1 + x), 1/3)
    elif x > 3:
        y = sin(2 * x)
    else:
        y = 2 + cos(3 * x)  # Эта ветка по условию не достигается
    
    if not isinstance(y, float) or y != y:  # Проверка на NaN
        print('x = %.2f\tфункция не определена' % x)
    else:
        s += y
        p *= y
        print('x = %.2f\ty = %.6f' % (x, y))
    
    x = x0 + i * hx  # Более точное вычисление следующего x
    i += 1

print('Сумма всех y = %.6f' % s)
print('Произведение всех y = %.6f' % p)